## View(뷰)
>하나 이상의 기본 테이블에서 유도되는 가상(Virtual)테이블이다.<BR> 뷰는 번거로운 SQL문(SELECT) 을 매번 입력하는 대신 보다 쉽게 원하는 결과를 얻고자 하는 바램에서 출발한 개념..
- 뷰는 저장장치 내에 물리적으로 존재하지 않지만 사용자에게는 있는 것처럼 보인다.
- 뷰를 생성하면 뷰 정의가 시스템 내에 저장되었다가 생성된 뷰 이름을 질의어(ex:sql)에서 사용할 경우<br> 질의어가 실행될 때 뷰에 정의된 기본 테이블로 대체되어 기본 테이블에 대해 실행한다
- 필요한 데이터만을 뷰로 정의해서 처리할 수 있기 때문에 관리가 용이하고 명령문이 간단하다.
- 뷰는 자체적으로 데이터를 갖고있지 않지만 테이블의 데이터를 보내거나 변경할 수 있다.
- 뷰를 통해서만 데이터에 접근함으로써 뷰에 나타나지 않는 데이터를 안전하게 보호할수 있다.
- 정의된 뷰는 다른 뷰의 정의에 기초가 될 수 있다.
- 데이터 딕셔너리 USER_VIEWS에 사용자가 뷰를 정의 할때 기술한 서브쿼리문(SELECT 문)만을 문자열 형태로 저장하고 있다.
    ```
    SELECT 뷰명,TEXT
    FROM USER_VIEWS;
    ```
### 뷰 연산 시의 제약성
- 뷰의 열이 테이블의 열(속성)이 아닌 상수,계산식,그룹함수를 사용해 만들어졌다면 그 뷰는 변경할수 없다.
- DISTINCT, GROUP BY, HAVING을 사용해 만들어진 뷰는 변경할 수 없다.
- 둘 이상의 테이블에서 유도된 뷰는 변경할 수 없다.
- 변경하지 못하는 뷰를 토대로 하여 생성된 뷰는 변경할 수 없다.
### 뷰의 필요성
- 보안상의 이유로 특정 데이터를 조회되지 않도록 하고싶을 때
- 복잡한 쿼리를 간단하게 조회하고싶을 때
### 뷰의 목적
1. **보안성**
    - 보안 관리 목적으로 활용한다
2. **편의성**
    - 사용상의 편의를 목적으로 활용한다
3. **속도 향상**
    - 수행속도의 향상의 목적으로 활용한다
4. **융통성**
    - 융통성을 향상시킬 목적으로 활용한다.
5. **활용성**
    - SQL의 성능을 향상시킬 목적으로 활용한다.
6. **임시성**
    - 임시적인 작업을 위해 활용한다.

### 뷰의 유형

|기능|단순 뷰|복합 뷰|
|:---|:----|:----|
|테이블수|1개|2개 이상|
|그룹 함수 포함 여부| X | O|
|DISTINCT 사용|X|O|
|DML작업 가능 여부|O|X|

- **단순 뷰**
    - DML 명령어를 사용하여 조작이 가능
    - 조작 불가능한 경우
        1. 기본 테이블의 칼럼이 NOT NULL 제약조건 지정된 경우 INSERT문 사용불가
        2. SAL*12와 같은 산술 표현식으로 정의된 가상 칼럼
        3. DISTINCT를 포함한 경우
        4. GROUP BY절을 포함한 경우 
        
- **복합 뷰**
    - 두개 이상의 기본 테이블에 의해 정의된 뷰
    - 

---

### 뷰 생성할수 있는 권한 얻기
1. SQLPLUS로 SYSTEM으로 접속
2. GRANT CREATE VIEW TO 계정명;
### CREATE VIEW(뷰 정의하기)
> 뷰를 생성하기 위해서는 CREATE VIEW로 시작한다.<BR>AS 다음은 마치 서브쿼리문과 유사하다.
- **표기형식**
```
CREATE [OR REPLACE] [FORCE | NOFORCE] VIEW 뷰명[(속성명[,속성명,···])]
AS SELECT문
[WITH CHECK OPRTION]
[WITH READ ONLY];
```
- **CREATE OR REPLACE**
    - CREATE OR REPLACE VIEW 대신 CREATE VIEW 만 사용해도 된다.
    - CREATE VIEW를 통해 만들어진 뷰의 구조를 바꾸려면 뷰를 삭제하고 다시만들어야한다.
    - CREATE OR REPLACE는 새로운 뷰를 만들수 있을뿐아니라 기존 뷰가 존재하더라도 삭제하지 않고 새로운 구조의 뷰로 변경(REPLACE)할 수 있다.
    - 뷰를 만들때는 CREATE OR REPLACE VIEW를 사용하자
- **FORCE**
    - 기본 테이블의 존재여부에 상관없이 뷰를 생성한다.
- **AS SELECT문**
    - 일반 SELECT문과 같으며, UNION이나 ORDER BY를 사용할 수 없다.
- **WITH CHECK OPTION**
    - 뷰에 대한 갱신이나 삽입 연산이 수행될 때 뷰의 정의 조건을 위배하면 실행을 거부한다.
        - WHERE절에서 기술한 조건에 위배되게 VIEW를 수정하지못한다.
- **WITH READ ONLY**
    - VIEW 전체를 수정,삭제,입력이 불가한 상태로 만듦
    - 이를 생략시 뷰를 사용하여 추가,수정,삭제 모두 가능
- **함수를 사용한 컬럼은 반드시 ALIAS(별칭)** 을 지정해야한다.


### 뷰 삭제
>뷰를 삭제한다는것은 USER_VIEWS 데이터 딕셔너리에 저장되어있는 뷰의 정의를 삭제하는 것을 의미
- 뷰를 삭제해도 뷰를 정의한 기본 테이블 구조나 데이터에는 전혀 영향을 주지 않는다.
- **표기형식** 
    - ```DROP VIEW 뷰명 [RESTRICT|CASCADE]; ```
    - RESTRICT: 뷰를 다른곳에서 참조하고 있으면 제거가 취소된다.
    - CASCADE: 뷰를 참조하는 다른 뷰나 제약 조건까지 모두 제거한다.
        

### 인라인 뷰
>CREATE 문으로 뷰를 만들지 않고 해당 라인에 직접 기술한다고 하여 INLINE VIEW라고 일컫는다.<BR>
>TOP-N을 구하기 위해서는 ROWNUM과 인라인 뷰가 사용된다.


